% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames,x11names}{xcolor}
%
\documentclass[
  letterpaper,
  DIV=11,
  numbers=noendperiod,
  oneside]{scrartcl}

\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\usepackage[left=1in,marginparwidth=2.0666666666667in,textwidth=4.1333333333333in,marginparsep=0.3in]{geometry}
\setlength{\emergencystretch}{3em} % prevent overfull lines
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
% Make \paragraph and \subparagraph free-standing
\ifx\paragraph\undefined\else
  \let\oldparagraph\paragraph
  \renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
  \let\oldsubparagraph\subparagraph
  \renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{241,243,245}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.40,0.45,0.13}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\BuiltInTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\ExtensionTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.28,0.35,0.67}{#1}}
\newcommand{\ImportTok}[1]{\textcolor[rgb]{0.00,0.46,0.62}{#1}}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\NormalTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.07,0.07,0.07}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}

\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother

\KOMAoption{captions}{tableheading}
\makeatletter
\makeatother
\makeatletter
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\AtBeginDocument{%
\ifdefined\contentsname
  \renewcommand*\contentsname{Table of contents}
\else
  \newcommand\contentsname{Table of contents}
\fi
\ifdefined\listfigurename
  \renewcommand*\listfigurename{List of Figures}
\else
  \newcommand\listfigurename{List of Figures}
\fi
\ifdefined\listtablename
  \renewcommand*\listtablename{List of Tables}
\else
  \newcommand\listtablename{List of Tables}
\fi
\ifdefined\figurename
  \renewcommand*\figurename{Figure}
\else
  \newcommand\figurename{Figure}
\fi
\ifdefined\tablename
  \renewcommand*\tablename{Table}
\else
  \newcommand\tablename{Table}
\fi
}
\@ifpackageloaded{float}{}{\usepackage{float}}
\floatstyle{ruled}
\@ifundefined{c@chapter}{\newfloat{codelisting}{h}{lop}}{\newfloat{codelisting}{h}{lop}[chapter]}
\floatname{codelisting}{Listing}
\newcommand*\listoflistings{\listof{codelisting}{List of Listings}}
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\@ifpackageloaded{subcaption}{}{\usepackage{subcaption}}
\makeatother
\makeatletter
\@ifpackageloaded{tcolorbox}{}{\usepackage[many]{tcolorbox}}
\makeatother
\makeatletter
\@ifundefined{shadecolor}{\definecolor{shadecolor}{HTML}{31BAE9}}
\makeatother
\makeatletter
\@ifpackageloaded{sidenotes}{}{\usepackage{sidenotes}}
\@ifpackageloaded{marginnote}{}{\usepackage{marginnote}}
\makeatother
\makeatletter
\makeatother
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same} % disable monospaced font for URLs
\hypersetup{
  pdftitle={AirfoilGmsh},
  pdfauthor={Carlo Brunelli},
  colorlinks=true,
  linkcolor={blue},
  filecolor={Maroon},
  citecolor={Blue},
  urlcolor={Blue},
  pdfcreator={LaTeX via pandoc}}

\title{AirfoilGmsh}
\usepackage{etoolbox}
\makeatletter
\providecommand{\subtitle}[1]{% add subtitle to \maketitle
  \apptocmd{\@title}{\par {\large #1 \par}}{}{}
}
\makeatother
\subtitle{New Julia package for airfoil meshing automatization}
\author{Carlo Brunelli}
\date{}

\begin{document}
\maketitle
\ifdefined\Shaded\renewenvironment{Shaded}{\begin{tcolorbox}[colback={shadecolor}, enhanced, boxrule=0pt, breakable, frame hidden]}{\end{tcolorbox}}\fi

\hypertarget{why-airfoilgmsh}{%
\subsection{Why AirfoilGmsh?}\label{why-airfoilgmsh}}

\begin{itemize}
\tightlist
\item
  Automatization of structured mesh for airfoils
\item
  Avoiding routine operations
\item
  Creates .geo file for GMSH
\end{itemize}

geo file, \(\approx\) 200 code lines

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Point(65) = \{0.96194*Cos(AoA) + {-}0.00463*Sin(AoA),{-}1* 0.96194*Sin(AoA) + {-}0.00463*Cos(AoA),0.0,a\_dim\};}
\NormalTok{Point(66) = \{0.98296*Cos(AoA) + {-}0.00218*Sin(AoA),{-}1* 0.98296*Sin(AoA) + {-}0.00218*Cos(AoA),0.0,a\_dim\};}
\NormalTok{Point(67) = \{1.0*Cos(AoA) + {-}0.00057*Sin(AoA),{-}1* 1.0*Sin(AoA) + {-}0.00057*Cos(AoA),0.0,a\_dim\};}
\NormalTok{Spline(1) = \{1:26\};}
\NormalTok{Spline(2) = \{26:42\};}
\NormalTok{Line(3) = \{1, 67\};}
\NormalTok{Spline(4) = \{42:67\};}
\NormalTok{Point(68) = \{0, C, 0\};}
\NormalTok{Point(69) = \{0, {-}C, 0\};}
\NormalTok{Point(70) = \{L, C, 0\};}
\NormalTok{Point(71) = \{L, {-}C, 0\};}
\NormalTok{Point(72) = \{1.0, C, 0\};}
\NormalTok{Point(73) = \{1.0, {-}C, 0\};}
\end{Highlighting}
\end{Shaded}

msh file, \(\approx\) 20K code lines

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{$Entities}
\NormalTok{82 29 11 0}
\NormalTok{1 1 0.00057 0 1 6 }
\NormalTok{2 0.9829599999999999 0.00218 0 0 }
\NormalTok{3 0.96194 0.00463 0 0 }
\NormalTok{4 0.93301 0.0077 0 0 }
\NormalTok{5 0.89668 0.01127 0 0 }
\NormalTok{6 0.85355 0.01522 0 0 }
\NormalTok{7 0.80438 0.01945 0 0 }
\NormalTok{8 0.75 0.02384 0 0 }
\NormalTok{9 0.69134 0.02823 0 0 }
\end{Highlighting}
\end{Shaded}

Before we delve into our solution, let's address the problem at hand.
Traditionally, creating airfoil meshes has been a time-consuming and
manual process, often requiring expertise in various software tools.
Personally, I found myself testing different airfoils and spending most
of the time in meshing-routine operations, so I recognize an opportunity
of automatization. Leveraging the capabilities of the Julia, the package
aims simplifies the entire process. It generates GEO files that are
directly compatible with Gmsh, reducing the manual intervention required
from users. Gmsh is a free open source software for meshing. AirfoilGmsh
provides automation, seamless integration with Gmsh It does not create
direcly an .msh file. The geo file is human-readable, and still fully
parametric as we will see.

\hypertarget{features}{%
\subsection{Features}\label{features}}

\begin{itemize}
\tightlist
\item
  Create a fully parametric structured mesh
\item
  Triangular or quadrangular elements
\end{itemize}

\includegraphics[width=0.45\textwidth,height=\textheight]{/images/Quad.png}
\includegraphics[width=0.45\textwidth,height=\textheight]{/images/Tri.png}

Here a list of feature and functionality which are supported at the
moment. It creates a fully parametric structured mesh, where the AoA,
domain dimension and number of divisions can be easily modified.

\hypertarget{features-1}{%
\subsection{Features}\label{features-1}}

\begin{itemize}
\tightlist
\item
  It can deal with sharp and non-sharp trailing edges
  \includegraphics[width=0.45\textwidth,height=\textheight]{/images/Non_Sharp.png}
  \includegraphics[width=0.45\textwidth,height=\textheight]{/images/Sharp.png}
\end{itemize}

It recognize if the trailing edge is sharp or not

\hypertarget{features-2}{%
\subsection{Features}\label{features-2}}

\begin{itemize}
\tightlist
\item
  Create 2D or 3D mesh
\item
  Create physical gropus for the boundaries (``inlet'', ``outlet'',
  ``airfoil'')
\item
  Import airfoil directly from \texttt{airfoiltools.com}
\item
  Boundary Layer analysis
\item
  Class Shape Transformation supports
\end{itemize}

It automatically creates tags for the boundaries It is possible to
create a .csv directly from an url obtained from airfoiltools, a
database of airfoil

It can also perform a boundary layer analysis and supports the class
shape tranformation

but let's see how to use it

\hypertarget{usage}{%
\subsection{Usage}\label{usage}}

Create CSV File

\begin{Shaded}
\begin{Highlighting}[]
\ImportTok{using} \BuiltInTok{AirfoilGmsh}
\NormalTok{url }\OperatorTok{=} \StringTok{"https://m{-}selig.ae.illinois.edu/ads/coord/c141a.dat"}
\NormalTok{filename }\OperatorTok{=} \FunctionTok{from\_url\_to\_csv}\NormalTok{(url)}
\end{Highlighting}
\end{Shaded}

Create the geofile

\begin{Shaded}
\begin{Highlighting}[]
\ImportTok{using} \BuiltInTok{AirfoilGmsh}
\NormalTok{filename }\OperatorTok{=} \StringTok{"c141a.csv"}
\FunctionTok{create\_geofile}\NormalTok{(filename);}
\end{Highlighting}
\end{Shaded}

The usage of the package is extremely simple and straightforward. The
user can for example naviagate on aifoiltools.com and find the profile
of interest and copy the url, like in the example, and it creates a .csv
file.

Then the creation of geofile is immediate.

The code recognize the leading and trailing edge, and treats differently
sharp and not-sharp traling edges.

It is possible to specify different keywords argument.

\hypertarget{options}{%
\subsection{Options}\label{options}}

\begin{itemize}
\tightlist
\item
  Dimension (2D or 3D)
\item
  Element Type (TRI/ QUAD)
\item
  Reynolds number
\item
  First layer height
\end{itemize}

It supports the creation of 2D and 3D mesh. For 3D mesh in the span
direction periodic boundary conditions are imposed.

The cells can be triangular or quadrangular.

For viscous simulations it is fundamental to correctly capture the
boundary layer, which strongly depends on the Reynolds.

\hypertarget{boundary-layer-analysis}{%
\subsection{Boundary Layer Analysis}\label{boundary-layer-analysis}}

\includegraphics[width=0.85\textwidth,height=\textheight]{/images/FlowChart.png}

Providing the Reynolds number or the height of the first layer, with
built-in algorithms and iterative routine it aims to create a proper
boundary layer, targeting an adequate y+ and guarantee enough cells in
the BL.

\hypertarget{class-shape-transformation}{%
\subsection{Class Shape
Transformation}\label{class-shape-transformation}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{filename }\OperatorTok{=} \StringTok{"e1098.csv"}
\NormalTok{Npoints }\OperatorTok{=} \FloatTok{500}
\NormalTok{x,y,\_,\_ }\OperatorTok{=} \FunctionTok{increase\_resolution\_airfoil}\NormalTok{(filename,Npoints)}
\end{Highlighting}
\end{Shaded}

\begin{figure}

{\centering \includegraphics[width=0.6\textwidth,height=\textheight]{/images/cst_enanching.png}

}

\caption{CST example}

\end{figure}

To enhance airfoil resolution and provide flexibility in meshing,
AirfoilGmsh incorporates class shape transformation feature. This allows
users to increase the resolution of the airfoil mesh by adjusting
specific parameters, thereby improving accuracy and capturing finer
details.

Providing the airfoil file coordinates it exploits the CST method to
provide the same airfoil but defined in more points. It solves a
minimization problem internally, it can take a while (some minutes).

\hypertarget{conclusion}{%
\subsection{Conclusion}\label{conclusion}}

Optional steps:

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\item
  Create .csv file from airfoiltools link
\item
  Improve .csv resolution with CST support
\end{enumerate}

Create Mesh

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Provide .csv file to AirfoilGmsh and set up the options
\item
  Open the .geo file with GMSH
\item
  Modify the mesh and geometry
\item
  Export the mesh
\end{enumerate}

In conclusion, the workflow for meshing generation is preatty
straight-forward, and it is summed up here. You can find further details
on usage and implementatation in the package documentation. Thank you
for your attention. I hope you found this presentation informative and
insightful. If you have any questions or would like to discuss
AirfoilGmsh further, please feel free to reach out.



\end{document}
